# タスク完了時のテスト実行

## 重要なルール

**タスク完了時には必ず`make test`を実行すること**

### 実行タイミング

以下の作業を完了した後、必ずテストを実行：

1. **コード変更**
   - バックエンド（Go）のコード変更
   - フロントエンド（TypeScript/React）のコード変更
   - インフラ（Terraform）の変更

2. **新機能の実装**
   - 新しいAPIエンドポイントの追加
   - 新しいコンポーネントの作成
   - 新しいモジュールの追加

3. **バグ修正**
   - 既存のバグを修正した後
   - エラーハンドリングの改善

4. **リファクタリング**
   - コードの整理や最適化
   - 依存関係の更新

### テストコマンド

```bash
# プロジェクトルートで実行
make test
```

このコマンドは以下を実行します：
- `cd back && go vet ./...` - Goコードの静的解析
- `cd back && go test -v ./...` - Goのユニットテスト
- その他のテスト（設定されている場合）

### 個別テスト

必要に応じて個別にテストを実行：

```bash
# バックエンドのみ
cd back && go vet ./...
cd back && go test -v ./...

# フロントエンドのみ
cd front && npm test

# Terraformの検証
cd infra/environments/production && terraform validate
```

### テスト失敗時の対応

1. **エラーメッセージを確認**
   - どのテストが失敗したか
   - エラーの原因は何か

2. **修正する**
   - コードを修正
   - 依存関係を追加/更新

3. **再度テスト**
   - `make test`を再実行
   - すべてのテストが通るまで繰り返す

4. **ユーザーに報告**
   - テスト結果を報告
   - 修正内容を説明

### 禁止事項

- ❌ テストを実行せずにタスク完了を報告
- ❌ テスト失敗を無視して次のタスクに進む
- ❌ 「後でテストします」と言って実行しない

### 正しい対応

- ✅ タスク完了後、必ず`make test`を実行
- ✅ テスト結果をユーザーに報告
- ✅ テスト失敗時は修正してから報告
- ✅ 新しいコードには適切なテストを追加

## 理由

- コードの品質を保証
- バグの早期発見
- リグレッションの防止
- デプロイ前の安全確認

## 例外

以下の場合はテストをスキップ可能：

1. **ドキュメントのみの変更**
   - READMEの更新
   - コメントの追加

2. **設定ファイルのみの変更**
   - `.gitignore`の更新
   - エディタ設定の変更

3. **ユーザーが明示的にスキップを指示**
   - 「テストは後で実行します」と明言

それ以外の場合は、**必ず`make test`を実行**すること。
